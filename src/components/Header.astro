---
const navItems = [
  { label: 'O chalupě', href: '#o-chalupe' },
  { label: 'Galerie', href: '#galerie' },
  { label: 'Vybavení', href: '#vybaveni' },
  { label: 'Ceník', href: '/cenik' },
  { label: 'Lokalita', href: '#lokalita' },
];
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 header-transparent transition-all duration-300">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="nav-link flex items-center gap-2 text-2xl font-serif font-semibold text-white hover:text-sand-200 transition-colors">
        <span class="hidden sm:inline">Chalupa na Fryšavě</span>
        <span class="sm:hidden">Fryšava</span>
      </a>

      <!-- Desktop Navigation -->
      <ul class="hidden lg:flex items-center gap-6">
        {navItems.map(item => (
          <li>
            <a
              href={item.href}
              class="nav-link text-white/90 hover:text-white font-medium transition-colors"
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>

      <!-- CTA Button -->
      <a href="/rezervace" class="hidden lg:inline-flex header-cta btn-primary">
        Rezervovat
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="lg:hidden ml-4 p-2 text-white hover:text-sand-200"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden lg:hidden mt-4 pb-4">
      <ul class="flex flex-col gap-3">
        {navItems.map(item => (
          <li>
            <a
              href={item.href}
              class="nav-link block py-2 text-white/90 hover:text-white font-medium transition-colors"
            >
              {item.label}
            </a>
          </li>
        ))}
        <li>
          <a
            href="/rezervace"
            class="nav-link block py-2 text-white/90 hover:text-white font-medium transition-colors"
          >
            Rezervovat
          </a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<script>
  const header = document.getElementById('header');
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  const updateHeader = () => {
    const scrollY = window.scrollY;

    if (scrollY > 100) {
      header?.classList.remove('header-transparent');
      header?.classList.add('header-solid');

      // Update nav links only
      const navLinks = header?.querySelectorAll('.nav-link');
      navLinks?.forEach(link => {
        link.classList.remove('text-white', 'text-white/90', 'hover:text-white', 'hover:text-sand-200');
        link.classList.add('text-charcoal-700', 'hover:text-wood-700');
      });

      // Update CTA button style
      const ctaButton = header?.querySelector('.header-cta');
      if (ctaButton) {
        ctaButton.classList.remove('btn-primary');
        ctaButton.classList.add('btn-secondary');
      }

      // Update mobile menu button
      const menuBtn = header?.querySelector('#mobile-menu-button');
      menuBtn?.classList.remove('text-white', 'hover:text-sand-200');
      menuBtn?.classList.add('text-charcoal-700', 'hover:text-wood-700');

    } else {
      header?.classList.remove('header-solid');
      header?.classList.add('header-transparent');

      // Restore nav links
      const navLinks = header?.querySelectorAll('.nav-link');
      navLinks?.forEach(link => {
        link.classList.remove('text-charcoal-700', 'hover:text-wood-700');
        link.classList.add('text-white', 'text-white/90', 'hover:text-white');
      });

      // Restore CTA button
      const ctaButton = header?.querySelector('.header-cta');
      if (ctaButton) {
        ctaButton.classList.remove('btn-secondary');
        ctaButton.classList.add('btn-primary');
      }

      // Restore mobile menu button
      const menuBtn = header?.querySelector('#mobile-menu-button');
      menuBtn?.classList.remove('text-charcoal-700', 'hover:text-wood-700');
      menuBtn?.classList.add('text-white', 'hover:text-sand-200');
    }
  };

  updateHeader();
  window.addEventListener('scroll', updateHeader, { passive: true });

  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  const mobileLinks = mobileMenu?.querySelectorAll('a');
  mobileLinks?.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>
